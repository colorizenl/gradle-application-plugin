//-----------------------------------------------------------------------------
// File generated by Colorize Gradle application plugin
//-----------------------------------------------------------------------------

import SwiftUI
import WebKit

@main
struct Test_AppApp: App {
    var body: some Scene {
        WindowGroup {
            HybridWebView()
        }
    }
}

struct HybridWebView: UIViewRepresentable {
    typealias UIViewType = WKWebView

    func makeUIView(context: Context) -> WKWebView {
        let preferences: WKPreferences = WKPreferences()
        preferences.javaScriptEnabled = true

        let config: WKWebViewConfiguration = WKWebViewConfiguration()
        config.preferences = preferences
        config.setValue(true, forKey: "_allowUniversalAccessFromFileURLs")

        return WKWebView(frame: .zero, configuration: config)
    }

    func updateUIView(_ webView: WKWebView, context: Context) {
        DispatchQueue.main.async {
            let url = Bundle.main.url(forResource: "index", withExtension: "html")!
            webView.loadFileURL(url, allowingReadAccessTo: url)
            webView.load(URLRequest(url: url))
        }
    }
}
